    <div id="product-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>
        <%= link_to 'モーダルテスト', edit_hokkaido_path(1), remote: true, class: "btn btn-large btn-primary"%>
    <tbody id="product-index" >
  </tbody>
</table>

<div class="row" name="test">
    <div class="col-md-1">
        <div class="btn-group-vertical" role="group" aria-label="Left Align">
            <label><input type="radio" name="entryPlan" value="hoge1" onclick="entryChange1();" checked="checked" />基盤系</label>
            <label><input type="radio" name="entryPlan" value="hoge2" onclick="entryChange1();" />サービス</label>
            <div id="kiban">
                <% @kiban_btn.each do |i| %>
                    <%= button_tag type: 'button', class: "btn btn-default", onclick: "changeShowKey('#{i[0]}','')" do %>
                        <%= "#{i[1]}" %>
                    <% end %>
                <% end %>
            </div>
            <div  id="service">
                <% @service_btn.each do |i| %>
                    <%= button_tag type: 'button', class: "btn btn-default", onclick: "changeShowKey('#{i[0]}','')" do %>
                        <%= "#{i[1]}" %>
                    <% end %>
                <% end %>
            </div>
        </div>
        <div class="btn-group-vertical" role="group" style = "margin: 10px 0px 0px 0px;">
            <%= link_to "自治体情報.xls", hokkaido_csv_path(format: "xls"), class: "btn btn-large btn-primary" %>
            <%= link_to "更新履歴.xls", hokkaido_csv_version_path(format: "xls"), class: "btn btn-large btn-primary" %>
        </div>
    </div>
    <div class="col-md-7" style="width:924px; height:760px;">
        <div class="col-md-7" id="map" style="width:924px; height:700px;"></div>
    </div>
    <div class="col-md-4" style="width:350px; height:750px;">
        <%= form_tag '/hokkaido', :method => 'get' do %>
           <%= text_field_tag :search, params[:search] %>
           <%= submit_tag "自治体検索", :cityname => nil, class: "btn btn-primary" %>
        <% end %>
        <% if params.has_key?(:search) then %>
            <div>
                <tbody>
                <% @search.each do |hvalue| %>
                    <tr>
                        <td><%= link_to hvalue.cityname, '#' ,:onclick => "get_data(#{hvalue.id})" %></td>
                    </tr>
                <% end %>
                </tbody>
            </div>
        <% end %>
        <iframe src="http://localhost:3001/hokkaido/info" frameborder="0" height="800" scrolling="no"></iframe>
    </div>


</div>


<script type="text/javascript">

    function entryChange1(){
        radio = document.getElementsByName('entryPlan') 
        if(radio[0].checked) {
            document.getElementById('kiban').style.display = "";
            document.getElementById('service').style.display = "none";
        }else if(radio[1].checked) {
            document.getElementById('kiban').style.display = "none";
            document.getElementById('service').style.display = "";
        }
    }
    window.onload = entryChange1;

    var url = "http://localhost:3001"

    function get_data(id){
        var url1 = url + "/hokkaido/" + "show/" + id;
        var url2 = url + "/hokkaido/" + id + "/edit";
        frames[0].location.href = url1;
        frames[1].location.href = url2;
        }

    var div = d3.select("body").append("div")
  .attr("class", "tooltip")
  .style("opacity", 0);

    var div2 = d3.select("body").append("div")
  .attr("class", "tooltip2")
  .style("opacity", 0);

    // file読み込み制御用
    var readTopofileDone = false;
    var readAttrfileDone = false;
    // filedata格納変数
    var topodata;
    var attrdata;
    // mapの設定値
    var map_width = 860;
    var map_height = 700;
    var svg;
    // map読み込み完了フラグ
    var drawMapDone = false;

    var color = ["#ffffff", "#29D2F3", "#b3ffff", "#b3fff2", "#b3ffd9", "#b3ffcc", "#b3ffb3", "#bfffb3", "#d9ffb3", "#e6ffb3", "#ffffb3", "#fff2b3", "#ffd9b3", "#ffccb3", "#ffb3bf", "#ffb3d9", "#ffb3e6", "#ffb3ff", "#f2b3ff", "#d9b3ff", "#ccb3ff", "#b3b3ff", "#b3bfff", "#b3d9ff"]

    // 配列の最大値を求める関数を定義しておく
    Array.prototype.max = function () {
        return Math.max.apply(Math, this);
    };
    Array.prototype.min = function () {
        return Math.min.apply(Math, this);
    };
    // 数値かどうかを判定する関数を定義しておく
    function isNumeric(n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    }

    var attrHash = new Object();
    var elementsHash = new Object();
    var maxHash = new Object();
    var minHash = new Object();

    function readTopofile(json) {
        topodata = json;
        readTopofileDone = true;
    }
    function readAttrfile(json) {
        attrdata = json;
        readAttrfileDone = true;
    }

    d3.json("hokkaido/hokkaido_map", function(error, json) {
        if(error) return console.warn(error);
            readTopofile(json);
            if (readTopofileDone && readAttrfileDone) {
                main(topodata, attrdata);
            }
        });

    d3.json("hokkaido/hokkaido_value", function(error, json) {
        if(error) return console.warn(error);
            readAttrfile(json);
            if (readTopofileDone && readAttrfileDone) {
                main(topodata, attrdata);
                changeShowKey('vender','');
            }
        });

    function main(topo, attr) {

        var labelLineHight = 16;

        // attr情報をIDをkeyとするhash tableに変換する
        // idをKeyとしたhashテーブル＆property毎のhashテーブルを作成する
        attr.forEach(function(e){
            attrHash[e.cityid]=e;
            for (var k in e) {
                if( k in elementsHash) {
                    elementsHash[k].push(e[k]);
                } else {
                    elementsHash[k] = [e[k]];
                }
            }
        });
        for (var k in elementsHash) {
            if (isNumeric(elementsHash[k][0])) {
                maxHash[k] = elementsHash[k].max();
                minHash[k] = elementsHash[k].min();
            }
        }

         // svgを追加
        svg = d3.select("body #map").append("svg")
                .attr("width", map_width)
                .attr("height", map_height);
        var g = svg.append("g");

        // 北海道のmapを読み込み
        var hokkaido = topojson.object(topo, topo.objects.hokkaido);

        // 北海道の中心を指定したメルカトル図法でサイズ指定
        var projection = d3.geo.mercator()
                .center([142.55,43.5])
                .scale(7000)
                .translate([map_width / 2, map_height / 2]);

        // pathを作成する
        var path = d3.geo.path().projection(projection);
        g.append("path")
          .datum(hokkaido)
          .attr("d", path);

        // classを指定して描画
        g.selectAll(".hokkaido")
            .data(hokkaido.geometries)
        .enter().append("path")
            .attr("class", function(d) {
                return "hokkaido " + d.properties.cityname;
                })
            .attr("data-remote", true)
            .attr("href", function(d) {
                return "/hokkaido/" + attrHash[d.properties.cityname].id + "/edit";
                })
            .attr("d", path)
            .on("mouseover", function(d) {
                d3.select(this)
                .transition().duration(100).attr("fill", "red")
                .style("opacity", 1);div.transition().duration(100)
                .style("opacity", 1)
            })
            .on("mouseout", function(d) {
                d3.select(this)
                .transition().duration(200).attr("fill", "#CEF6CE");
            })

        // zoom and pan
        var zoom = d3.behavior.zoom()
        .on("zoom",function() {
            g.attr("transform","translate("+
                d3.event.translate.join(",")+")scale("+d3.event.scale+")");
            g.selectAll("circle")
            .attr("d", path.projection(projection));
            g.selectAll("path")
            .attr("d", path.projection(projection));
        });
        svg.call(zoom)

        // 内部境界に線を引く
        g.append("path")
           .datum(topojson.mesh(topo, topo.objects.hokkaido, function(a, b) { return a !== b; }))
           .attr("d", path)
           .attr("class", "subunit-boundary");

        // ベース色指定しておく
        g.selectAll(".hokkaido")
            .attr("fill", "#CEF6CE");


        

        // 市町村名のラベル貼り
        g.selectAll(".cityname-label")
            .data(hokkaido.geometries)
          .enter()
            .append("text")
                .attr("class", function(d) {
                    return "cityname-label "+d.properties.cityname; /* class名にidを付与 */
                    })
                .attr("transform", function(d) {
                    // 文字をpath中央から、文字高さ1/2分高い位置に貼る
                    var pos = path.centroid(d);
                    pos[1] -= labelLineHight / 8;
                    return "translate(" + pos + ")";
                })
                .attr("dy", ".35em")
                .style("font-size", "9px")
                .text(function(d) {
                    return attrHash[d.properties.cityname].cityname;
                });

        // CSSで一旦display:noneを指定しているので、各区の先頭object上のみラベルを表示する
        for (var k in attrHash) {
            svg.select(".cityname-label."+k).style("display", "block");
            svg.select(".stat-label."+k).style("display", "block");
        }

        drawMapDone = true;
    }

    function changeShowKey(showKey, unit) {

        if (drawMapDone == false) {
            return;
        }

        // 色塗り
        var showElements = elementsHash[showKey].slice(0);
        showElements.sort(function(a, b){ return a - b; });

        var areaGrad = d3.scale.linear()
                        .domain([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23])
                        .range([color[0], color[1], color[2], color[3], color[4], color[5], color[6], color[7], color[8], color[9], color[10], color[11], color[12], color[13], color[14], color[15], color[16], color[17], color[18], color[19], color[20], color[21], color[22], color[23]]);

        for (var k in attrHash) {
            e = attrHash[k];
            svg.selectAll(".hokkaido."+k)
            .attr("fill", areaGrad(e[showKey]))
            .on("mouseover", function(d) {
                var vender = ( attrHash[d.properties.cityname].vender == 1 ) ? "a、" : "";
                var eac = ( attrHash[d.properties.cityname].eac == 1 ) ? "b、" : "";
                var frs = ( attrHash[d.properties.cityname].frs == 1 ) ? "c、" : "";
                var eps = ( attrHash[d.properties.cityname].eps == 1 ) ? "d、" : "";
                var ca = ( attrHash[d.properties.cityname].ca == 1 ) ? "e、" : "";
                var pa = ( attrHash[d.properties.cityname].pa == 1 ) ? "f、" : "";
                var gw = ( attrHash[d.properties.cityname].gw == 1 ) ? "g、" : "";
                var cms = ( attrHash[d.properties.cityname].cms == 1 ) ? "h、" : "";
                var mail = ( attrHash[d.properties.cityname].mail == 1 ) ? "i、" : "";
                var bu = ( attrHash[d.properties.cityname].bu == 1 ) ? "j、" : "";
                var rs = ( attrHash[d.properties.cityname].rs == 1 ) ? "k、" : "";
                var ps = ( attrHash[d.properties.cityname].ps == 1 ) ? "l、" : "";
                var fn = ( attrHash[d.properties.cityname].fn == 1 ) ? "m、" : "";
                var ns = ( attrHash[d.properties.cityname].ns == 1 ) ? "n、" : "";
                var ss = ( attrHash[d.properties.cityname].ss == 1 ) ? "o、" : "";
                var ft = ( attrHash[d.properties.cityname].ft == 1 ) ? "p、" : "";
                var et = ( attrHash[d.properties.cityname].et == 1 ) ? "q、" : "";
                var ib = ( attrHash[d.properties.cityname].ib == 1 ) ? "r" : "";
                var service = vender + eac + frs + eps + ca + pa + gw + cms + mail + bu + rs + ps + fn + ns + ss + ft + et + ib;
                // serviceの末尾に"、"がある場合は削除
                var serviceAfter = ( service.substr( (service.length-1) )  == "、" ) ? service.substr( 0 , (service.length-1) ) : service;
                var content = "";
                content += "<center>"+ attrHash[d.properties.cityname].cityname + "</center>";
                content += "<center>" + "【" + showKey + "の契約会社】" + "</center>";
                content += "<center>" + attrHash[d.properties.cityname][showKey] + "</center>";
                content += "<center>"+ "【HARPとの契約サービス】" + "</center>";
                content += serviceAfter
                d3.select(this)
                .transition().duration(100).attr("fill", "red")
                .style("opacity", 1);div.transition().duration(100)
                .style("opacity", 1)
                div.html(content)
                .style("left", (d3.event.pageX +10) + "px")
                .style("top", (d3.event.pageY -100) + "px");
            })
            .on("mouseout", function(d) {
                d3.select(this)
                .transition().duration(200).attr("fill", areaGrad(attrHash[d.properties.cityname][showKey]))
                .style("opacity", 1.0);
                div.transition().duration(200)
                .style("opacity", 0);
            })
            svg.select(".cityname-label."+k).attr("fill", "black");
        }

     svg.selectAll(".hokkaido.id011002")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(1) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012025")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(2) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012033")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(3) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012041")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(4) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012050")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(5) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012068")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(6) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012076")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(7) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012084")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(8) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012092")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(9) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012106")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(10) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012114")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(11) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012122")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(12) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012131")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(13) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012149")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(14) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012157")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(15) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012165")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(16) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012173")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(17) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012181")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(18) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012190")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(19) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012203")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(20) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012211")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(21) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012220")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(22) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012238")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(23) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012246")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(24) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012254")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(25) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012262")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(26) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012271")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(27) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012289")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(28) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012297")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(29) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012301")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(30) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012319")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(31) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012335")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(32) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012343")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(33) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012351")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(34) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id012360")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(35) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013030")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(36) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013048")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(37) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013315")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(38) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013323")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(39) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013331")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(40) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013340")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(41) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013374")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(42) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013439")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(43) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013455")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(44) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013463")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(45) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013471")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(46) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013617")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(47) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013625")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(48) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013633")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(49) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013641")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(50) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013676")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(51) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013706")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(52) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013714")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(53) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013919")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(54) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013927")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(55) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013935")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(56) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013943")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(57) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013951")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(58) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013960")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(59) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013978")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(60) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013986")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(61) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id013994")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(62) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014001")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(63) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014010")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(64) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014028")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(65) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014036")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(66) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014044")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(67) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014052")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(68) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014061")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(69) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014079")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(70) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014087")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(71) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014095")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(72) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014231")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(73) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014249")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(74) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014257")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(75) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014273")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(76) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014281")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(77) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014290")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(78) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014303")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(79) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014311")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(80) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014320")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(81) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014338")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(82) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014346")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(83) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014362")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(84) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014371")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(85) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014389")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(86) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014524")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(87) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014532")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(88) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014541")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(89) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014559")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(90) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014567")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(91) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014575")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(92) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014583")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(93) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014591")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(94) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014605")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(95) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014613")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(96) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014621")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(97) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014630")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(98) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014648")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(99) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014656")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(100) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014681")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(101) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014699")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(102) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014702")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(103) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014711")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(104) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014729")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(105) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014818")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(106) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014826")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(107) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014834")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(108) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014842")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(109) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014851")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(110) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014869")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(111) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id014877")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(112) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015113")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(113) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015121")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(114) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015130")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(115) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015148")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(116) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015164")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(117) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015172")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(118) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015181")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(119) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015199")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(120) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015202")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(121) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015431")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(122) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015440")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(123) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015458")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(124) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015466")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(125) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015474")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(126) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015491")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(127) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015504")
            .on("click", function() {
                $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(128) }) %>")
                $("#product-modal").modal("show")
            })
     svg.selectAll(".hokkaido.id015521")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(129) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015555")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(130) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015598")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(131) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015601")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(132) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015610")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(133) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015628")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(134) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015636")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(135) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015644")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(136) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015717")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(137) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015750")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(138) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015784")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(139) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015814")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(140) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015849")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(141) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015857")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(142) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id015865")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(143) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016012")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(144) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016021")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(145) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016047")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(146) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016071")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(147) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016080")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(148) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016098")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(149) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016101")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(150) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016314")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(151) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016322")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(152) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016331")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(153) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016349")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(154) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016357")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(155) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016365")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(156) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016373")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(157) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016381")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(158) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016390")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(159) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016411")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(160) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016420")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(161) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016438")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(162) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016446")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(163) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016454")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(164) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016462")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(165) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016471")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(166) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016489")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(167) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016497")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(168) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016616")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(169) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016624")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(170) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016632")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(171) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016641")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(172) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016659")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(173) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016675")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(174) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016683")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(175) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016918")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(176) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016926")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(177) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016934")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(178) }) %>")
            $("#product-modal").modal("show")
        })
     svg.selectAll(".hokkaido.id016942")
        .on("click", function() {
            $("#product-modal").html("<%= escape_javascript(render partial: 'modal', locals: { hvalue: Hvalue.find(179) }) %>")
            $("#product-modal").modal("show")
        })

        //円グラフ用にデータをカウント
        var legend = {};
        for(var i in attrHash) {
            f = attrHash[i];
            if(!legend[f[showKey]]){
                legend[f[showKey]] = 0;
            }
            legend[f[showKey]]++;
        }

        //データセットをループで作成
        var data4 = [];
        for (var l = 0; l < color.length; l++) {
            data4.push({
                name: l,
                value: legend[l],
                color: color[l]
            });
        }

        //data4からundefined以外を拾ってデータセットを作成
        var data3 = [];
        for (var j = 0; j < data4.length; j++) {
            if (data4[j].value !== undefined) {
            data3.push(data4[j]);
        }}

        //円グラフの半径
        var radius = 100;
        var svg2 = svg.append("g")
            .attr("transform", "translate(" + [110, 110] + ")");
        var arc = d3.svg.arc()
                .outerRadius(radius)
                .innerRadius(0);

        var arcOver = d3.svg.arc()
                .outerRadius(radius + 50)
                .innerRadius(0);

        var pie = d3.layout.pie()
                .sort(null)
                .value(function(d){  return d.value ; });
        var g2 = svg2.selectAll(".fan")
                .data(pie(data3))
                .enter()
                .append("g")
                .attr("class", "fan")

        //円グラフ描写
        g2.append("path")
            .attr("d", arc)
            .attr("fill", function(d){  return d.data.color; })
            .on("mouseover", function (d) {
                d3.select(this).transition().duration(100)
                .attr("d", arcOver)
                .style("opacity", 1);
                div2.transition().duration(100)
                .style("opacity", 1)
                var per = (d.value/179)*100;
                var per2 = per.toFixed(1);
                var content = "";
                content += "<center>"+ d.data.name + "</center>";
                content += d.value + "/179自治体(" + per2 + "%)"
                div2.html(content)
                .style("left", (d3.event.pageX +10) + "px")
                .style("top", (d3.event.pageY -40) + "px");
            })
            .on("mouseout", function() {
                d3.select(this)
                .transition().duration(100)
                .attr("d", arc)
                .style("opacity", 1.0)
                div2.transition().duration(100)
                .style("opacity", 0);
            })

        //円グラフの名前
        g2.append("text")
            .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")";})
            .style("text-anchor", "middle")
            .text(function(d) { return d.data.name; });
    }

</script>
